(()=>{"use strict";let t=!1;setTimeout((()=>{if(t){let t=new Event("windowScroll");window.addEventListener("scroll",(function(e){document.dispatchEvent(t)}))}}),0);const e=["легкий","средний","сложный","гуру"],n=["лендинг","магазин","многостраничник","приложение","квиз"],a=["адаптивный","десктоп","мобильный"],i=["en","ru","ukr"];function o(){s=e.includes(r)?`filters[difficulty][$eq]=${r}&sort=daatee:desc`:n.includes(r)?`filters[type][$eq]=${r}&sort=daatee:desc`:a.includes(r)?`filters[adaptive][$eq]=${r}&sort=daatee:desc`:i.includes(r)?`filters[language][$eq]=${r}&sort=daatee:desc`:"sort=daatee:desc"}let s,r=decodeURIComponent(location.hash.split("#")[1]);const l=document.querySelector(".main__block");let c=1;async function d(){document.querySelector(".main__loader").classList.toggle("hidden");const{data:t,meta:{pagination:e}}=await async function(){let t;window.innerWidth>1270&&(t=12),window.innerWidth>790&&(t=8),window.innerWidth<=790&&(t=3),console.log(`http://localhost:1337/api/cards?${s}&pagination[page]=${c}&populate=media&_sort=date:DESC&pagination[pageSize]=${t}`);const e=await fetch(`http://localhost:1337/api/cards?${s}&pagination[page]=${c}&populate=media&_sort=date:DESC&pagination[pageSize]=${t}`);return await e.json()}(),n=t.map((t=>(fetch(`http://localhost:5000/cards/${t.id}`),`\n        <div class="main__card">\n            <div class="main__card_top">\n                <div class="main__card_date"><img src="./img/calendar.svg" alt=""> ${function(t){const e=new Date(t);return`${e.getDate().toString().padStart(2,"0")}.${(e.getMonth()+1).toString().padStart(2,"0")}.${e.getFullYear().toString()} ${e.getHours().toString().padStart(2,"0")}:${e.getMinutes().toString().padStart(2,"0")}`}(t.attributes.daatee)}</div>\n                <div class="main__card_views"><img src="./img/eye.svg" alt=""> ${parseInt(t.attributes.views)+1}</div>\n            </div>\n            <video loop autoplay src="${t.attributes.media.data.attributes.url.replace(/\/uploads/g,"http://localhost:1337/uploads")}" controls></video>\n            <ul>\n                <li><strong>${t.attributes.title} </strong>${t.attributes.description}</li>\n                <li><strong>Уровень сложности: </strong><button class="${t.attributes.difficulty} search">#${t.attributes.difficulty}</button></li>\n                <li><strong>Тип: </strong><button class="${t.attributes.type} search">#${t.attributes.type}</button></li>\n                <li><strong>Адаптивность: </strong><button class="${t.attributes.adaptive} search">#${t.attributes.adaptive}</button></li>\n                <li><strong>Язык: </strong><button class="${t.attributes.language} search">#${t.attributes.language}</button></li>\n                <li><strong>Цена макета: </strong>~${t.attributes.price} ₽.</li>\n                <p>P.S. Вы можете дублировать файл Figma себе, нажав на Duplicate to your Drafts.</p>\n            </ul>\n            <div class="main__card_down">\n                <a href="${t.attributes.link}">Ссылка на макет</a>\n                <a href="${t.attributes.telegram}">Макет в телеграмме</a>\n            </div>\n        </div>\n    `))).join("");l.insertAdjacentHTML("beforeend",n),c++,document.querySelectorAll(".search").forEach((t=>{t.addEventListener("click",(()=>{c=1,window.location.hash=t.innerHTML.split("#")[1]}))})),c<=e.pageCount&&window.addEventListener("scroll",u),document.querySelector(".main__loader").classList.toggle("hidden")}function u(){const{scrollTop:t,scrollHeight:e,clientHeight:n}=document.documentElement;t+n>=e-100&&(window.removeEventListener("scroll",u),d())}document.querySelector(".header__logo").addEventListener("click",(()=>{c=1,window.location.hash=""})),document.getElementsByClassName,window.addEventListener("hashchange",(()=>function(){document.getElementById("main__block").innerHTML="",r=decodeURIComponent(location.hash),s="sort=daatee:desc",c=1,r&&(r=r.split("#")[1],o());d()}())),o(),d();let g=document.querySelector("._search");g.addEventListener("input",(()=>{c=1,""!=g.value?(window.location.hash="",document.getElementById("main__block").innerHTML="",s=`filters[$or][0][title][$containsi]=${g.value}&filters[$or][1][description][$containsi]=${g.value}&filters[$or][2][language][$containsi]=${g.value}&filters[$or][3][type][$containsi]=${g.value}&filters[$or][4][adaptive][$containsi]=${g.value}&sort=daatee:desc`,p||(p=!0)):(document.getElementById("main__block").innerHTML="",s="sort=daatee:desc"),d()}));let p=!1;window.FLS=!0,function(t){let e=new Image;e.onload=e.onerror=function(){t(2==e.height)},e.src="data:image/webp;base64,UklGRjoAAABXRUJQVlA4IC4AAACyAgCdASoCAAIALmk0mk0iIiIiIgBoSygABc6WWgAA/veff/0PP8bA//LwYAAA"}((function(t){let e=!0===t?"webp":"no-webp";document.documentElement.classList.add(e)}))})();